!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscapeKey=this._handleEscapeKey.bind(this),this._closeBtn=this._popupElement.querySelector("#popup-close")},(n=[{key:"open",value:function(){this._popupElement.classList.add("popup__open"),document.addEventListener("keydown",this._handleEscapeKey)}},{key:"close",value:function(){this._popupElement.classList.remove("popup__open")}},{key:"_handleEscapeKey",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._closeBtn.addEventListener("click",(function(){e.close()})),this._popupElement.addEventListener("click",(function(t){"popup__overlay"===t.target.className&&e.close()}))}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}function a(e,t,n){return t=s(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},l.apply(null,arguments)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var f=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=a(this,t,[e]))._formElement=r._popupElement.querySelector(".popup__form"),r._inputList=r._formElement.querySelectorAll(".popup__input"),r._handleFormSubmit=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,(r=[{key:"getInputValues",value:function(){var e=this;return this.formValues={},this._inputList.forEach((function(t){e.formValues[t.name]=t.value})),this.formValues}},{key:"close",value:function(){l(s(t.prototype),"close",this).call(this),this._formElement.reset()}},{key:"setEventListeners",value:function(){var e=this;l(s(t.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(n){n.preventDefault(),e._handleFormSubmit(e.getInputValues()),l(s(t.prototype),"close",e).call(e)}))}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var b=document.querySelector(".template__card"),d=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._link=n,this._card=this.getTemplate(),this._handleClickCard=r},(t=[{key:"getTemplate",value:function(){return b.cloneNode(!0).content.querySelector(".element")}},{key:"_setProperties",value:function(){this._cardImage=this._card.querySelector(".element__image"),this._cardTitle=this._card.querySelector(".element__title"),this._btnDelete=this._card.querySelector(".element__button"),this._btnLike=this._card.querySelector(".element__title-button"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name}},{key:"_handleLike",value:function(){this._btnLike.classList.toggle("element__title-button-active")}},{key:"_handleRemove",value:function(){this._card.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._btnLike.addEventListener("click",(function(){e._handleLike()})),this._btnDelete.addEventListener("click",(function(){e._handleRemove()})),this._cardImage.addEventListener("click",(function(){e._handleClickCard(e._link,e._name)}))}},{key:"generateCard",value:function(){return this._setProperties(),this._setEventListeners(),this._card}}])&&m(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}var g=function(){return e=function e(t){var n=t.nameSelector,r=t.roleSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._role=document.querySelector(r)},(t=[{key:"getUserInfo",value:function(){return{userName:this._name.textContent,userRole:this._role.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.role;this._name.textContent=t,this._role.textContent=n}}])&&h(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function k(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}var j=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settings=n,this._formElement=t},(t=[{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(t)?(e.classList.add(this._settings.inactiveButtonClass),e.disabled=!0):(e.classList.remove(this._settings.inactiveButtonClass),e.disabled=!1)}},{key:"_showInputError",value:function(e,t,n){this.errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.add(this._settings.inputErrorClass),this.errorElement.classList.add(this._settings.inputErrorMessageClass),this.errorElement.textContent=t}},{key:"_hideInputError",value:function(e,t){this.errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._settings.inputErrorClass),this.errorElement.classList.remove(this._settings.errorClass),this.errorElement.textContent=""}},{key:"_checkInputValidity",value:function(e,t){e.validity.valid?this._hideInputError(e,t):this._showInputError(e,e.validationMessage,t)}},{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),r=this._formElement.querySelector(this._settings.submitButtonSelector);this._toggleButtonState(r,n),n.forEach((function(o){o.addEventListener("input",(function(){t._checkInputValidity(o,e),t._toggleButtonState(r,n)}))}))}},{key:"enableValidation",value:function(){Array.from(document.querySelectorAll(this._settings.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()}))})),this._setEventListeners()}}])&&w(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),P=document.querySelector("#popup-profile"),O=document.querySelector(".profile__info-edit"),L=document.querySelector("#popup-addcard"),C=document.querySelector(".profile__button"),q=document.querySelector("#profile-name"),I=document.querySelector("#profile-role"),T=document.querySelector("#input-name"),B=document.querySelector("#input-role"),R=document.querySelector("#input-title-card"),x=document.querySelector("#input-link-card"),V=document.querySelector(".elements"),D=(document.querySelector(".popup__close-icon"),{inputSelector:".popup__input",formSelector:".popup__form",submitButtonSelector:".popup__btn",inactiveButtonClass:".popup__btn_disabled",inputErrorClass:".popup__input_type_error",inputErrorMessageClass:".popup__error-visible"});function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function A(e){var t=function(e){if("object"!=z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==z(t)?t:t+""}function K(e,t,n){return t=U(t),function(e,t){if(t&&("object"==z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,M()?Reflect.construct(t,n||[],U(e).constructor):t.apply(e,n))}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},N.apply(null,arguments)}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}var Y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=K(this,t,[e]))._image=n._popupElement.querySelector(".popup__image-full"),n._title=n._popupElement.querySelector(".popup__image-title"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(t,e),n=t,(r=[{key:"open",value:function(e,n){N(U(t.prototype),"open",this).call(this),this._image.src=e,this._title.textContent=n}}])&&W(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J(r.key),r)}}function J(e){var t=function(e){if("object"!=G(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:t+""}var Q=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._rendererItems=r,this._renderer=o,this._section=document.querySelector(n)},(t=[{key:"addItem",value:function(e){this._section.append(e)}},{key:"renderItems",value:function(){var e=this;this._rendererItems.forEach((function(t){e._renderer(t)}))}}])&&H(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();T.value=q.textContent,B.value=I.textContent;var X=new g({nameSelector:"#profile-name",roleSelector:".profile__info-role"}),Z=new Y("#popup-image");Z.setEventListeners();var $=new f("#popup-profile",(function(e){X.setUserInfo({name:e.name,role:e.job})}));$.setEventListeners();var ee=new f("#popup-addcard",(function(){var e=new d(R.value,x.value,(function(e,t){return Z.open(e,t)})).generateCard();V.prepend(e)}));ee.setEventListeners();var te=new Q({items:[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"Montañas Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}],renderer:function(e){var t=new d(e.name,e.link,(function(){Z.open(e.link,e.name)})).generateCard();te.addItem(t)}},".elements");te.renderItems(),O.addEventListener("click",(function(){$.open(q.textContent,I.textContent)})),C.addEventListener("click",(function(){ee.open()})),new j(P,D).enableValidation(),new j(L,D).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBTSw4RkdpQk42RSxTQUFVLFNBQUNNLEdBQ1QsSUFHTWEsRUFIUSxJQUFJakcsRUFBS29GLEVBQUs5RixLQUFNOEYsRUFBS25GLE1BQU0sV0FDM0NxRixFQUFhTyxLQUFLVCxFQUFLbkYsS0FBTW1GLEVBQUs5RixLQUNwQyxJQUMwQndHLGVBRTFCRSxHQUFTRSxRQUFRRCxFQUNuQixHQUVGLGFBR0ZELEdBQVNHLGNBRVR0QyxFQUFjM0YsaUJBQWlCLFNBQVMsV0FDdENzSCxFQUFVSyxLQUFLN0IsRUFBWWpELFlBQWFrRCxFQUFZbEQsWUFDdEQsSUFFQWdELEVBQWE3RixpQkFBaUIsU0FBUyxXQUNyQ3lILEdBQVVFLE1BQ1osSUFFOEIsSUFBSS9ELEVBQWM4QixFQUFjVyxHQUN4QzZCLG1CQUVLLElBQUl0RSxFQUFjZ0MsRUFBWVMsR0FDdEM2QixrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL3BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL3BvcHVwd2l0aGZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvY2FyZHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvdXNlcmluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9wb3B1cHdpdGhpbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9zZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9wYWdlL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjYXBlS2V5ID0gdGhpcy5faGFuZGxlRXNjYXBlS2V5LmJpbmQodGhpcyk7XG4gICAgdGhpcy5fY2xvc2VCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1jbG9zZVwiKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fb3BlblwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVLZXkpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fb3BlblwiKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NhcGVLZXkoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc05hbWUgPT09IFwicG9wdXBfX292ZXJsYXlcIikge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9wb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIGdldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuZm9ybVZhbHVlcztcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZW1wbGF0ZV9fY2FyZFwiKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIGxpbmssIGhhbmRsZUNsaWNrQ2FyZCkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2NhcmQgPSB0aGlzLmdldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5faGFuZGxlQ2xpY2tDYXJkID0gaGFuZGxlQ2xpY2tDYXJkO1xuICB9XG4gIGdldFRlbXBsYXRlKCkge1xuICAgIHJldHVybiB0ZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSkuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIik7XG4gIH1cblxuICBfc2V0UHJvcGVydGllcygpIHtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2J0bkRlbGV0ZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19idXR0b25cIik7XG4gICAgdGhpcy5fYnRuTGlrZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZS1idXR0b25cIik7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlKCkge1xuICAgIHRoaXMuX2J0bkxpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX3RpdGxlLWJ1dHRvbi1hY3RpdmVcIik7XG4gIH1cblxuICBfaGFuZGxlUmVtb3ZlKCkge1xuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fYnRuTGlrZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuX2J0bkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDbGlja0NhcmQodGhpcy5fbGluaywgdGhpcy5fbmFtZSk7XG4gICAgfSk7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fc2V0UHJvcGVydGllcygpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgcm9sZVNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX3JvbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHJvbGVTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXNlck5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICB1c2VyUm9sZTogdGhpcy5fcm9sZS50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCByb2xlIH0pIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9yb2xlLnRleHRDb250ZW50ID0gcm9sZTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBzZXR0aW5ncykge1xuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGJ1dHRvbkVsZW1lbnQsIGlucHV0TGlzdCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIF9mb3JtRWxlbWVudCkge1xuICAgIHRoaXMuZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuXG4gICAgdGhpcy5lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yTWVzc2FnZUNsYXNzKTtcbiAgICB0aGlzLmVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIF9mb3JtRWxlbWVudCkge1xuICAgIHRoaXMuZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLmVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xuICAgIHRoaXMuZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50LCBmb3JtRWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihcbiAgICAgICAgaW5wdXRFbGVtZW50LFxuICAgICAgICBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsXG4gICAgICAgIGZvcm1FbGVtZW50XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGZvcm1FbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQpIHtcbiAgICBsZXQgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIGxldCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcblxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGJ1dHRvbkVsZW1lbnQsIGlucHV0TGlzdCk7XG5cbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCwgZm9ybUVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShidXR0b25FbGVtZW50LCBpbnB1dExpc3QpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuZm9ybVNlbGVjdG9yKVxuICAgICk7XG4gICAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLXByb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW5mby1lZGl0XCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWFkZGNhcmRcIik7XG5leHBvcnQgY29uc3Qgb3BlbkNhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlUm9sZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1yb2xlXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBpbnB1dFJvbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LXJvbGVcIik7XG5leHBvcnQgY29uc3QgaW5wdXRDYXJkVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LXRpdGxlLWNhcmRcIik7XG5leHBvcnQgY29uc3QgaW5wdXRDYXJkSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LWxpbmstY2FyZFwiKTtcbmV4cG9ydCBjb25zdCBjYXJkQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XG5leHBvcnQgY29uc3QgY2xvc2VCdG5Qb3B1cHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1pY29uXCIpO1xuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiVmFsbGUgZGUgWW9zZW1pdGVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vbnRhw7FhcyBDYWx2YXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGUgbGEgVmFub2lzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J0blwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIi5wb3B1cF9fYnRuX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCIucG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgaW5wdXRFcnJvck1lc3NhZ2VDbGFzczogXCIucG9wdXBfX2Vycm9yLXZpc2libGVcIixcbn07XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS1mdWxsXCIpO1xuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXRpdGxlXCIpO1xuICB9XG5cbiAgb3BlbihsaW5rLCBuYW1lKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2FyZFNlY3Rpb25TZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVySXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX3NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhcmRTZWN0aW9uU2VsZWN0b3IpO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fc2VjdGlvbi5hcHBlbmQoZWxlbWVudCk7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9yZW5kZXJlckl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9wb3B1cHdpdGhmb3JtLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9jYXJkcy5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL3VzZXJpbmZvLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHtcbiAgcG9wdXBQcm9maWxlLFxuICBwcm9maWxlQnV0dG9uLFxuICBwb3B1cENhcmRzLFxuICBvcGVuQ2FyZEZvcm0sXG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlUm9sZSxcbiAgaW5wdXROYW1lLFxuICBpbnB1dFJvbGUsXG4gIGlucHV0Q2FyZFRpdGxlLFxuICBpbnB1dENhcmRJbWFnZSxcbiAgY2FyZEFyZWEsXG4gIGluaXRpYWxDYXJkcyxcbiAgY29uZmlnLFxufSBmcm9tIFwiLi4vY29tcG9uZW50cy91dGlscy5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL3BvcHVwd2l0aGltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9zZWN0aW9uLmpzXCI7XG5cbmlucHV0TmFtZS52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuaW5wdXRSb2xlLnZhbHVlID0gcHJvZmlsZVJvbGUudGV4dENvbnRlbnQ7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIiNwcm9maWxlLW5hbWVcIixcbiAgcm9sZVNlbGVjdG9yOiBcIi5wcm9maWxlX19pbmZvLXJvbGVcIixcbn0pO1xuXG5jb25zdCBwb3B1cFBpY3R1cmUgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcG9wdXAtaW1hZ2VcIik7XG5wb3B1cFBpY3R1cmUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBVc2VyID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcG9wdXAtcHJvZmlsZVwiLCAoaW5wdXQpID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiBpbnB1dC5uYW1lLCByb2xlOiBpbnB1dC5qb2IgfSk7XG59KTtcbnBvcHVwVXNlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1hZGRjYXJkXCIsICgpID0+IHtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKFxuICAgIGlucHV0Q2FyZFRpdGxlLnZhbHVlLFxuICAgIGlucHV0Q2FyZEltYWdlLnZhbHVlLFxuICAgIChsaW5rLCBuYW1lKSA9PiBwb3B1cFBpY3R1cmUub3BlbihsaW5rLCBuYW1lKVxuICApLmdlbmVyYXRlQ2FyZCgpO1xuICBjYXJkQXJlYS5wcmVwZW5kKG5ld0NhcmQpO1xufSk7XG5wb3B1cENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkcyA9IG5ldyBDYXJkKGl0ZW0ubmFtZSwgaXRlbS5saW5rLCAoKSA9PiB7XG4gICAgICAgIHBvcHVwUGljdHVyZS5vcGVuKGl0ZW0ubGluaywgaXRlbS5uYW1lKTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkcy5nZW5lcmF0ZUNhcmQoKTtcblxuICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgXCIuZWxlbWVudHNcIlxuKTtcblxuY2FyZExpc3QucmVuZGVySXRlbXMoKTtcblxucHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cFVzZXIub3Blbihwcm9maWxlTmFtZS50ZXh0Q29udGVudCwgcHJvZmlsZVJvbGUudGV4dENvbnRlbnQpO1xufSk7XG5cbm9wZW5DYXJkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cENhcmQub3BlbigpO1xufSk7XG5cbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHBvcHVwUHJvZmlsZSwgY29uZmlnKTtcbnByb2ZpbGVGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGNhcmRGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHBvcHVwQ2FyZHMsIGNvbmZpZyk7XG5jYXJkRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xuIl0sIm5hbWVzIjpbIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfcG9wdXBFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2hhbmRsZUVzY2FwZUtleSIsImJpbmQiLCJfY2xvc2VCdG4iLCJrZXkiLCJ2YWx1ZSIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJldnQiLCJjbG9zZSIsIl90aGlzIiwidGFyZ2V0IiwiY2xhc3NOYW1lIiwiUG9wdXBXaXRoRm9ybSIsIl9Qb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJfY2FsbFN1cGVyIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbmhlcml0cyIsIl90aGlzMiIsImZvcm1WYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJuYW1lIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImNhbGwiLCJyZXNldCIsIl90aGlzMyIsInByZXZlbnREZWZhdWx0IiwiZ2V0SW5wdXRWYWx1ZXMiLCJ0ZW1wbGF0ZSIsIkNhcmQiLCJsaW5rIiwiaGFuZGxlQ2xpY2tDYXJkIiwiX25hbWUiLCJfbGluayIsIl9jYXJkIiwiZ2V0VGVtcGxhdGUiLCJfaGFuZGxlQ2xpY2tDYXJkIiwiY2xvbmVOb2RlIiwiY29udGVudCIsIl9jYXJkSW1hZ2UiLCJfY2FyZFRpdGxlIiwiX2J0bkRlbGV0ZSIsIl9idG5MaWtlIiwic3JjIiwidGV4dENvbnRlbnQiLCJ0b2dnbGUiLCJfaGFuZGxlTGlrZSIsIl9oYW5kbGVSZW1vdmUiLCJfc2V0UHJvcGVydGllcyIsIl9zZXRFdmVudExpc3RlbmVycyIsIlVzZXJJbmZvIiwiX3JlZiIsIm5hbWVTZWxlY3RvciIsInJvbGVTZWxlY3RvciIsIl9yb2xlIiwidXNlck5hbWUiLCJ1c2VyUm9sZSIsIl9yZWYyIiwicm9sZSIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsInNldHRpbmdzIiwiX3NldHRpbmdzIiwiaW5wdXRMaXN0Iiwic29tZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJidXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvck1lc3NhZ2VDbGFzcyIsImVycm9yQ2xhc3MiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIkFycmF5IiwiZnJvbSIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJmb3JtU2VsZWN0b3IiLCJwb3B1cFByb2ZpbGUiLCJwcm9maWxlQnV0dG9uIiwicG9wdXBDYXJkcyIsIm9wZW5DYXJkRm9ybSIsInByb2ZpbGVOYW1lIiwicHJvZmlsZVJvbGUiLCJpbnB1dE5hbWUiLCJpbnB1dFJvbGUiLCJpbnB1dENhcmRUaXRsZSIsImlucHV0Q2FyZEltYWdlIiwiY2FyZEFyZWEiLCJjb25maWciLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl90aXRsZSIsIlNlY3Rpb24iLCJjYXJkU2VjdGlvblNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlckl0ZW1zIiwiX3JlbmRlcmVyIiwiX3NlY3Rpb24iLCJlbGVtZW50IiwiYXBwZW5kIiwiaXRlbSIsInVzZXJJbmZvIiwicG9wdXBQaWN0dXJlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cFVzZXIiLCJzZXRVc2VySW5mbyIsImpvYiIsInBvcHVwQ2FyZCIsIm5ld0NhcmQiLCJvcGVuIiwiZ2VuZXJhdGVDYXJkIiwicHJlcGVuZCIsImNhcmRMaXN0IiwiY2FyZEVsZW1lbnQiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==