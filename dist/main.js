!function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};function t(e){e.querySelector(".popup__overlay").addEventListener("click",o),e.classList.add("popup__open")}function n(e){e.querySelector(".popup__overlay").removeEventListener("click",o),e.classList.remove("popup__open")}function r(e,t){"Escape"===e.key&&n(t)}function o(e){n(e.target.closest(".popup"))}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}e.d({},{ar:function(){return I},t9:function(){return P},nj:function(){return x}});var s=document.querySelector(".template__card"),c=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._link=n,this._card=this.getTemplate()},(n=[{key:"getTemplate",value:function(){return s.cloneNode(!0).content.querySelector(".element")}},{key:"_setProperties",value:function(){this._cardImage=this._card.querySelector(".element__image"),this._cardTitle=this._card.querySelector(".element__title"),this._btnDelete=this._card.querySelector(".element__button"),this._btnLike=this._card.querySelector(".element__title-button"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name}},{key:"_handleLike",value:function(){this._btnLike.classList.toggle("element__title-button-active")}},{key:"_handleRemove",value:function(){this._card.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._btnLike.addEventListener("click",(function(){e._handleLike()})),this._btnDelete.addEventListener("click",(function(){e._handleRemove()})),this._cardImage.addEventListener("click",(function(){t(I),P.src=e._link,x.textContent=e._name,P.alt=e._name}))}},{key:"generateCard",value:function(){return this._setProperties(),this._setEventListeners(),this._card}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var d=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settings=n,this._formElement=t},(t=[{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(t)?(e.classList.add(this._settings.inactiveButtonClass),e.disabled=!0):(e.classList.remove(this._settings.inactiveButtonClass),e.disabled=!1)}},{key:"_showInputError",value:function(e,t,n){this.errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.add(this._settings.inputErrorClass),this.errorElement.classList.add(this._settings.inputErrorMessageClass),this.errorElement.textContent=t}},{key:"_hideInputError",value:function(e,t){this.errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._settings.inputErrorClass),this.errorElement.classList.remove(this._settings.errorClass),this.errorElement.textContent=""}},{key:"_checkInputValidity",value:function(e,t){e.validity.valid?this._hideInputError(e,t):this._showInputError(e,e.validationMessage,t)}},{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),r=this._formElement.querySelector(this._settings.submitButtonSelector);this._toggleButtonState(r,n),n.forEach((function(o){o.addEventListener("input",(function(){t._checkInputValidity(o,e),t._toggleButtonState(r,n)}))}))}},{key:"enableValidation",value:function(){Array.from(document.querySelectorAll(this._settings.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()}))})),this._setEventListeners()}}])&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),_=(document.querySelector(".popup"),document.querySelector("#popup-profile")),f=document.querySelector(".profile__info-edit"),y=document.querySelector("#popup-addcard"),v=document.querySelector(".profile__button"),h=document.querySelector("#profile-name"),S=document.querySelector("#profile-role"),b=document.querySelector("#input-name"),E=document.querySelector("#input-role"),g=(document.querySelector(".element__title"),document.querySelector("#input-title-card")),k=document.querySelector("#input-link-card"),w=document.querySelector("#profile-form"),L=document.querySelector("#form-addcard"),q=document.querySelector(".popup__close-icon"),C=y.querySelector("#popup-close"),j=document.querySelector(".popup__close-icon-image"),B=document.querySelector(".elements"),I=document.querySelector("#popup-image"),P=(document.querySelector(".element__image"),I.querySelector(".popup__image-full")),x=I.querySelector(".popup__image-title");w.addEventListener("submit",(function(e){e.preventDefault(),h.textContent=b.value,S.textContent=E.value,n(_)})),L.addEventListener("submit",(function(e){e.preventDefault();var t=new c(g.value,k.value).generateCard();n(y),B.prepend(t)})),[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"MontaÃ±as Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}].forEach((function(e){var t=new c(e.name,e.link).generateCard();B.append(t)})),b.value=h.textContent,E.value=S.textContent,f.addEventListener("click",(function(){t(_)})),q.addEventListener("click",(function(){n(_)})),v.addEventListener("click",(function(){t(y)})),C.addEventListener("click",(function(){n(y)})),j.addEventListener("click",(function(){n(I)})),document.addEventListener("keydown",(function(e){r(e,_),r(e,y),r(e,I)}));var T={inputSelector:".popup__input",formSelector:".popup__form",submitButtonSelector:".popup__btn",inactiveButtonClass:".popup__btn_disabled",inputErrorClass:".popup__input_type_error",inputErrorMessageClass:".popup__error-visible"};new d(_,T).enableValidation(),new d(y,T).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQ0EsSUFBSUEsRUFBc0IsQ0NBMUJBLEVBQXdCLFNBQVNDLEVBQVNDLEdBQ3pDLElBQUksSUFBSUMsS0FBT0QsRUFDWEYsRUFBb0JJLEVBQUVGLEVBQVlDLEtBQVNILEVBQW9CSSxFQUFFSCxFQUFTRSxJQUM1RUUsT0FBT0MsZUFBZUwsRUFBU0UsRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLElBRzNFLEVDUEFILEVBQXdCLFNBQVNTLEVBQUtDLEdBQVEsT0FBT0wsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsRUFBTyxHQ0EvRixTQUFTSSxFQUFpQkMsR0FDL0JBLEVBQ0dDLGNBQWMsbUJBQ2RDLGlCQUFpQixRQUFTQyxHQUM3QkgsRUFBTUksVUFBVUMsSUFBSSxjQUN0QixDQUVPLFNBQVNDLEVBQWtCTixHQUNoQ0EsRUFDR0MsY0FBYyxtQkFDZE0sb0JBQW9CLFFBQVNKLEdBQ2hDSCxFQUFNSSxVQUFVSSxPQUFPLGNBQ3pCLENBRU8sU0FBU0MsRUFBZ0JDLEVBQUtWLEdBQ25CLFdBQVpVLEVBQUl0QixLQUNOa0IsRUFBa0JOLEVBRXRCLENBRU8sU0FBU0csRUFBZU8sR0FFN0JKLEVBRGNJLEVBQUlDLE9BQU9DLFFBQVEsVUFFbkMsQyxvdkJDcEJBLElBQU1DLEVBQVdDLFNBQVNiLGNBQWMsbUJBRW5CYyxFQUFJLFdBS3RCLE8sRUFKRCxTQUFBQSxFQUFZQyxFQUFNQyxJLDRGQUFNQyxDQUFBLEtBQUFILEdBQ3RCSSxLQUFLQyxNQUFRSixFQUNiRyxLQUFLRSxNQUFRSixFQUNiRSxLQUFLRyxNQUFRSCxLQUFLSSxhQUNwQixHLEVBQUMsRUFBQW5DLElBQUEsY0FBQW9DLE1BQ0QsV0FDRSxPQUFPWCxFQUFTWSxXQUFVLEdBQU1DLFFBQVF6QixjQUFjLFdBQ3hELEdBQUMsQ0FBQWIsSUFBQSxpQkFBQW9DLE1BRUQsV0FDRUwsS0FBS1EsV0FBYVIsS0FBS0csTUFBTXJCLGNBQWMsbUJBQzNDa0IsS0FBS1MsV0FBYVQsS0FBS0csTUFBTXJCLGNBQWMsbUJBQzNDa0IsS0FBS1UsV0FBYVYsS0FBS0csTUFBTXJCLGNBQWMsb0JBQzNDa0IsS0FBS1csU0FBV1gsS0FBS0csTUFBTXJCLGNBQWMsMEJBQ3pDa0IsS0FBS1EsV0FBV0ksSUFBTVosS0FBS0UsTUFDM0JGLEtBQUtTLFdBQVdJLFlBQWNiLEtBQUtDLEtBQ3JDLEdBQUMsQ0FBQWhDLElBQUEsY0FBQW9DLE1BRUQsV0FDRUwsS0FBS1csU0FBUzFCLFVBQVU2QixPQUFPLCtCQUNqQyxHQUFDLENBQUE3QyxJQUFBLGdCQUFBb0MsTUFFRCxXQUNFTCxLQUFLRyxNQUFNZCxRQUNiLEdBQUMsQ0FBQXBCLElBQUEscUJBQUFvQyxNQUVELFdBQXFCLElBQUFVLEVBQUEsS0FDbkJmLEtBQUtXLFNBQVM1QixpQkFBaUIsU0FBUyxXQUN0Q2dDLEVBQUtDLGFBQ1AsSUFDQWhCLEtBQUtVLFdBQVczQixpQkFBaUIsU0FBUyxXQUN4Q2dDLEVBQUtFLGVBQ1AsSUFDQWpCLEtBQUtRLFdBQVd6QixpQkFBaUIsU0FBUyxXQUN4Q0gsRUFBaUJzQyxHQUNqQkMsRUFBV1AsSUFBTUcsRUFBS2IsTUFDdEJrQixFQUFXUCxZQUFjRSxFQUFLZCxNQUM5QmtCLEVBQVdFLElBQU1OLEVBQUtkLEtBQ3hCLEdBQ0YsR0FBQyxDQUFBaEMsSUFBQSxlQUFBb0MsTUFFRCxXQUlFLE9BSEFMLEtBQUtzQixpQkFDTHRCLEtBQUt1QixxQkFFRXZCLEtBQUtHLEtBQ2QsTSw2RUFBQyxDQS9Dc0IsRyxzcUJDTEpxQixFQUFhLFdBSS9CLE8sRUFIRCxTQUFBQSxFQUFZQyxFQUFhQyxJLDRGQUFVM0IsQ0FBQSxLQUFBeUIsR0FDakN4QixLQUFLMkIsVUFBWUQsRUFDakIxQixLQUFLNEIsYUFBZUgsQ0FDdEIsRyxFQUFDLEVBQUF4RCxJQUFBLG1CQUFBb0MsTUFFRCxTQUFpQndCLEdBQ2YsT0FBT0EsRUFBVUMsTUFBSyxTQUFDQyxHQUNyQixPQUFRQSxFQUFhQyxTQUFTQyxLQUNoQyxHQUNGLEdBQUMsQ0FBQWhFLElBQUEscUJBQUFvQyxNQUVELFNBQW1CNkIsRUFBZUwsR0FDNUI3QixLQUFLbUMsaUJBQWlCTixJQUN4QkssRUFBY2pELFVBQVVDLElBQUljLEtBQUsyQixVQUFVUyxxQkFDM0NGLEVBQWNHLFVBQVcsSUFFekJILEVBQWNqRCxVQUFVSSxPQUFPVyxLQUFLMkIsVUFBVVMscUJBQzlDRixFQUFjRyxVQUFXLEVBRTdCLEdBQUMsQ0FBQXBFLElBQUEsa0JBQUFvQyxNQUVELFNBQWdCMEIsRUFBY08sRUFBY1YsR0FDMUM1QixLQUFLdUMsYUFBZXZDLEtBQUs0QixhQUFhOUMsY0FBYyxJQUFEMEQsT0FDN0NULEVBQWFVLEdBQUUsV0FHckJWLEVBQWE5QyxVQUFVQyxJQUFJYyxLQUFLMkIsVUFBVWUsaUJBRTFDMUMsS0FBS3VDLGFBQWF0RCxVQUFVQyxJQUFJYyxLQUFLMkIsVUFBVWdCLHdCQUMvQzNDLEtBQUt1QyxhQUFhMUIsWUFBY3lCLENBQ2xDLEdBQUMsQ0FBQXJFLElBQUEsa0JBQUFvQyxNQUVELFNBQWdCMEIsRUFBY0gsR0FDNUI1QixLQUFLdUMsYUFBZXZDLEtBQUs0QixhQUFhOUMsY0FBYyxJQUFEMEQsT0FDN0NULEVBQWFVLEdBQUUsV0FFckJWLEVBQWE5QyxVQUFVSSxPQUFPVyxLQUFLMkIsVUFBVWUsaUJBQzdDMUMsS0FBS3VDLGFBQWF0RCxVQUFVSSxPQUFPVyxLQUFLMkIsVUFBVWlCLFlBQ2xENUMsS0FBS3VDLGFBQWExQixZQUFjLEVBQ2xDLEdBQUMsQ0FBQTVDLElBQUEsc0JBQUFvQyxNQUVELFNBQW9CMEIsRUFBY04sR0FDM0JNLEVBQWFDLFNBQVNDLE1BT3pCakMsS0FBSzZDLGdCQUFnQmQsRUFBY04sR0FObkN6QixLQUFLOEMsZ0JBQ0hmLEVBQ0FBLEVBQWFnQixrQkFDYnRCLEVBS04sR0FBQyxDQUFBeEQsSUFBQSxxQkFBQW9DLE1BRUQsU0FBbUJvQixHQUFhLElBQUFWLEVBQUEsS0FDMUJjLEVBQVltQixNQUFNQyxLQUNwQmpELEtBQUs0QixhQUFhc0IsaUJBQWlCbEQsS0FBSzJCLFVBQVV3QixnQkFFaERqQixFQUFnQmxDLEtBQUs0QixhQUFhOUMsY0FDcENrQixLQUFLMkIsVUFBVXlCLHNCQUdqQnBELEtBQUtxRCxtQkFBbUJuQixFQUFlTCxHQUV2Q0EsRUFBVXlCLFNBQVEsU0FBQ3ZCLEdBQ2pCQSxFQUFhaEQsaUJBQWlCLFNBQVMsV0FDckNnQyxFQUFLd0Msb0JBQW9CeEIsRUFBY04sR0FDdkNWLEVBQUtzQyxtQkFBbUJuQixFQUFlTCxFQUN6QyxHQUNGLEdBQ0YsR0FBQyxDQUFBNUQsSUFBQSxtQkFBQW9DLE1BRUQsV0FDbUIyQyxNQUFNQyxLQUNyQnRELFNBQVN1RCxpQkFBaUJsRCxLQUFLMkIsVUFBVTZCLGVBRWxDRixTQUFRLFNBQUM3QixHQUNoQkEsRUFBWTFDLGlCQUFpQixVQUFVLFNBQVVRLEdBQy9DQSxFQUFJa0UsZ0JBQ04sR0FDRixJQUNBekQsS0FBS3VCLG9CQUNQLE0sNkVBQUMsQ0FsRitCLEdDVTVCbUMsR0FEUS9ELFNBQVNiLGNBQWMsVUFDaEJhLFNBQVNiLGNBQWMsbUJBQ3RDNkUsRUFBZ0JoRSxTQUFTYixjQUFjLHVCQUN2QzhFLEVBQWFqRSxTQUFTYixjQUFjLGtCQUNwQytFLEVBQWVsRSxTQUFTYixjQUFjLG9CQUN0Q2dGLEVBQWNuRSxTQUFTYixjQUFjLGlCQUNyQ2lGLEVBQWNwRSxTQUFTYixjQUFjLGlCQUNyQ2tGLEVBQVlyRSxTQUFTYixjQUFjLGVBQ25DbUYsRUFBWXRFLFNBQVNiLGNBQWMsZUFFbkNvRixHQURZdkUsU0FBU2IsY0FBYyxtQkFDbEJhLFNBQVNiLGNBQWMsc0JBQ3hDcUYsRUFBaUJ4RSxTQUFTYixjQUFjLG9CQUN4Q3NGLEVBQWN6RSxTQUFTYixjQUFjLGlCQUNyQ3VGLEVBQVkxRSxTQUFTYixjQUFjLGlCQUNuQ3dGLEVBQXFCM0UsU0FBU2IsY0FBYyxzQkFDNUN5RixFQUFzQlgsRUFBVzlFLGNBQWMsZ0JBQy9DMEYsRUFBbUI3RSxTQUFTYixjQUFjLDRCQUMxQzJGLEVBQVc5RSxTQUFTYixjQUFjLGFBQzNCb0MsRUFBYXZCLFNBQVNiLGNBQWMsZ0JBRXBDcUMsR0FEUXhCLFNBQVNiLGNBQWMsbUJBQ2xCb0MsRUFBV3BDLGNBQWMsdUJBQ3RDc0MsRUFBYUYsRUFBV3BDLGNBQWMsdUJBK0NuRHNGLEVBQVlyRixpQkFBaUIsVUFqQjdCLFNBQWlDUSxHQUMvQkEsRUFBSWtFLGlCQUNKSyxFQUFZakQsWUFBY21ELEVBQVUzRCxNQUNwQzBELEVBQVlsRCxZQUFjb0QsRUFBVTVELE1BQ3BDbEIsRUFBa0J1RSxFQUNwQixJQWFBVyxFQUFVdEYsaUJBQWlCLFVBWDNCLFNBQWdDUSxHQUM5QkEsRUFBSWtFLGlCQUNKLElBQU1pQixFQUFVLElBQUk5RSxFQUNsQnNFLEVBQWU3RCxNQUNmOEQsRUFBZTlELE9BQ2ZzRSxlQUNGeEYsRUFBa0J5RSxHQUNsQmEsRUFBU0csUUFBUUYsRUFDbkIsSUEzQ3FCLENBQ25CLENBQ0U3RSxLQUFNLG9CQUNOQyxLQUFNLGlHQUVSLENBQ0VELEtBQU0sY0FDTkMsS0FBTSxvR0FFUixDQUNFRCxLQUFNLGtCQUNOQyxLQUFNLHVHQUVSLENBQ0VELEtBQU0sVUFDTkMsS0FBTSxnR0FFUixDQUNFRCxLQUFNLGdDQUNOQyxLQUFNLGdHQUVSLENBQ0VELEtBQU0saUJBQ05DLEtBQU0sOEZBMEJHd0QsU0FBUSxTQUFDdUIsR0FDcEIsSUFBTUgsRUFBVSxJQUFJOUUsRUFBS2lGLEVBQVFoRixLQUFNZ0YsRUFBUS9FLE1BQU02RSxlQUNyREYsRUFBU0ssT0FBT0osRUFDbEIsSUFFQVYsRUFBVTNELE1BQVF5RCxFQUFZakQsWUFDOUJvRCxFQUFVNUQsTUFBUTBELEVBQVlsRCxZQUk5QjhDLEVBQWM1RSxpQkFBaUIsU0FBUyxXQUN0Q0gsRUFBaUI4RSxFQUNuQixJQUVBWSxFQUFtQnZGLGlCQUFpQixTQUFTLFdBQzNDSSxFQUFrQnVFLEVBQ3BCLElBRUFHLEVBQWE5RSxpQkFBaUIsU0FBUyxXQUNyQ0gsRUFBaUJnRixFQUNuQixJQUVBVyxFQUFvQnhGLGlCQUFpQixTQUFTLFdBQzVDSSxFQUFrQnlFLEVBQ3BCLElBRUFZLEVBQWlCekYsaUJBQWlCLFNBQVMsV0FDekNJLEVBQWtCK0IsRUFDcEIsSUFFQXZCLFNBQVNaLGlCQUFpQixXQUFXLFNBQUNRLEdBQ3BDRCxFQUFnQkMsRUFBS21FLEdBQ3JCcEUsRUFBZ0JDLEVBQUtxRSxHQUNyQnRFLEVBQWdCQyxFQUFLMkIsRUFDdkIsSUFJQSxJQUFNNkQsRUFBUyxDQUNiNUIsY0FBZSxnQkFDZkssYUFBYyxlQUNkSixxQkFBc0IsY0FDdEJoQixvQkFBcUIsdUJBQ3JCTSxnQkFBaUIsMkJBQ2pCQyx1QkFBd0IseUJBR0ksSUFBSW5CLEVBQWNrQyxFQUFjcUIsR0FDeENDLG1CQUVLLElBQUl4RCxFQUFjb0MsRUFBWW1CLEdBQ3RDQyxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NjcmlwdHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc2NyaXB0cy9jYXJkcy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJleHBvcnQgZnVuY3Rpb24gaGFuZGxlT3BlblBvcHVwcyhwb3B1cCkge1xuICBwb3B1cFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19vdmVybGF5XCIpXG4gICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVDbGlja091dCk7XG4gIHBvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fb3BlblwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUNsb3NlUG9wdXBzKHBvcHVwKSB7XG4gIHBvcHVwXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX292ZXJsYXlcIilcbiAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNsaWNrT3V0KTtcbiAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlRXNjYXBlS2V5KGV2dCwgcG9wdXApIHtcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBoYW5kbGVDbG9zZVBvcHVwcyhwb3B1cCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUNsaWNrT3V0KGV2dCkge1xuICBjb25zdCBwb3B1cCA9IGV2dC50YXJnZXQuY2xvc2VzdChcIi5wb3B1cFwiKTtcbiAgaGFuZGxlQ2xvc2VQb3B1cHMocG9wdXApO1xufVxuIiwiaW1wb3J0IHsgaGFuZGxlT3BlblBvcHVwcyB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBwb3B1cEltYWdlLCBwb3B1cFBob3RvLCBwb3B1cHRpdGxlIH0gZnJvbSBcIi4uL3NyYy9pbmRleC5qc1wiO1xuXG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVtcGxhdGVfX2NhcmRcIik7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBsaW5rKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5fY2FyZCA9IHRoaXMuZ2V0VGVtcGxhdGUoKTtcbiAgfVxuICBnZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gdGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpO1xuICB9XG5cbiAgX3NldFByb3BlcnRpZXMoKSB7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKTtcbiAgICB0aGlzLl9idG5EZWxldGUgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fYnV0dG9uXCIpO1xuICAgIHRoaXMuX2J0bkxpa2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGl0bGUtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gIH1cblxuICBfaGFuZGxlTGlrZSgpIHtcbiAgICB0aGlzLl9idG5MaWtlLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X190aXRsZS1idXR0b24tYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZVJlbW92ZSgpIHtcbiAgICB0aGlzLl9jYXJkLnJlbW92ZSgpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2J0bkxpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2UoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9idG5EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaGFuZGxlT3BlblBvcHVwcyhwb3B1cEltYWdlKTtcbiAgICAgIHBvcHVwUGhvdG8uc3JjID0gdGhpcy5fbGluaztcbiAgICAgIHBvcHVwdGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgICAgcG9wdXBQaG90by5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIH0pO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX3NldFByb3BlcnRpZXMoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZShidXR0b25FbGVtZW50LCBpbnB1dExpc3QpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBfZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLmVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcblxuICAgIHRoaXMuZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvck1lc3NhZ2VDbGFzcyk7XG4gICAgdGhpcy5lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBfZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLmVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5lcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgICB0aGlzLmVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCwgZm9ybUVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoXG4gICAgICAgIGlucHV0RWxlbWVudCxcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLFxuICAgICAgICBmb3JtRWxlbWVudFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBmb3JtRWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50KSB7XG4gICAgbGV0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICBsZXQgYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG5cbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShidXR0b25FbGVtZW50LCBpbnB1dExpc3QpO1xuXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQsIGZvcm1FbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoYnV0dG9uRWxlbWVudCwgaW5wdXRMaXN0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmZvcm1TZWxlY3RvcilcbiAgICApO1xuICAgIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBoYW5kbGVPcGVuUG9wdXBzLFxuICBoYW5kbGVDbG9zZVBvcHVwcyxcbiAgaGFuZGxlRXNjYXBlS2V5LFxufSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL3NjcmlwdHMvY2FyZHMuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBcIi4vc3R5bGVzL2luZGV4LmNzc1wiO1xuXG5jb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIik7XG5jb25zdCBwb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLXByb2ZpbGVcIik7XG5jb25zdCBwcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbmZvLWVkaXRcIik7XG5jb25zdCBwb3B1cENhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1hZGRjYXJkXCIpO1xuY29uc3Qgb3BlbkNhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b25cIik7XG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lXCIpO1xuY29uc3QgcHJvZmlsZVJvbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtcm9sZVwiKTtcbmNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtbmFtZVwiKTtcbmNvbnN0IGlucHV0Um9sZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtcm9sZVwiKTtcbmNvbnN0IGNhcmRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGl0bGVcIik7XG5jb25zdCBpbnB1dENhcmRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtdGl0bGUtY2FyZFwiKTtcbmNvbnN0IGlucHV0Q2FyZEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dC1saW5rLWNhcmRcIik7XG5jb25zdCBmb3JtUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1mb3JtXCIpO1xuY29uc3QgZm9ybUNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtLWFkZGNhcmRcIik7XG5jb25zdCBwcm9maWxlQ2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1pY29uXCIpO1xuY29uc3QgY2FyZEZvcm1DbG9zZUJ1dHRvbiA9IHBvcHVwQ2FyZHMucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1jbG9zZVwiKTtcbmNvbnN0IGltYWdlQ2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1pY29uLWltYWdlXCIpO1xuY29uc3QgY2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWltYWdlXCIpO1xuY29uc3QgZWxlbWVudEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cFBob3RvID0gcG9wdXBJbWFnZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS1mdWxsXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwdGl0bGUgPSBwb3B1cEltYWdlLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXRpdGxlXCIpO1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlZhbGxlIGRlIFlvc2VtaXRlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb250YcOxYXMgQ2FsdmFzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUGFycXVlIE5hY2lvbmFsIGRlIGxhIFZhbm9pc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuLy8gRm9ybXNcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBpbnB1dE5hbWUudmFsdWU7XG4gIHByb2ZpbGVSb2xlLnRleHRDb250ZW50ID0gaW5wdXRSb2xlLnZhbHVlO1xuICBoYW5kbGVDbG9zZVBvcHVwcyhwb3B1cFByb2ZpbGUpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQb3B1cENhcmRzU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKFxuICAgIGlucHV0Q2FyZFRpdGxlLnZhbHVlLFxuICAgIGlucHV0Q2FyZEltYWdlLnZhbHVlXG4gICkuZ2VuZXJhdGVDYXJkKCk7XG4gIGhhbmRsZUNsb3NlUG9wdXBzKHBvcHVwQ2FyZHMpO1xuICBjYXJkQXJlYS5wcmVwZW5kKG5ld0NhcmQpO1xufVxuXG5mb3JtUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbmZvcm1DYXJkcy5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVBvcHVwQ2FyZHNTdWJtaXQpO1xuXG4vLyBDYXJkc1xuaW5pdGlhbENhcmRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGVsZW1lbnQubmFtZSwgZWxlbWVudC5saW5rKS5nZW5lcmF0ZUNhcmQoKTtcbiAgY2FyZEFyZWEuYXBwZW5kKG5ld0NhcmQpO1xufSk7XG5cbmlucHV0TmFtZS52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuaW5wdXRSb2xlLnZhbHVlID0gcHJvZmlsZVJvbGUudGV4dENvbnRlbnQ7XG5cbi8vSGFuZGxlIG9wZW4gYW5kIGNsb3NlIGZvcm1zIGFuZCBjYXJkc1xuXG5wcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGhhbmRsZU9wZW5Qb3B1cHMocG9wdXBQcm9maWxlKTtcbn0pO1xuXG5wcm9maWxlQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaGFuZGxlQ2xvc2VQb3B1cHMocG9wdXBQcm9maWxlKTtcbn0pO1xuXG5vcGVuQ2FyZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaGFuZGxlT3BlblBvcHVwcyhwb3B1cENhcmRzKTtcbn0pO1xuXG5jYXJkRm9ybUNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGhhbmRsZUNsb3NlUG9wdXBzKHBvcHVwQ2FyZHMpO1xufSk7XG5cbmltYWdlQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaGFuZGxlQ2xvc2VQb3B1cHMocG9wdXBJbWFnZSk7XG59KTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2dCkgPT4ge1xuICBoYW5kbGVFc2NhcGVLZXkoZXZ0LCBwb3B1cFByb2ZpbGUpO1xuICBoYW5kbGVFc2NhcGVLZXkoZXZ0LCBwb3B1cENhcmRzKTtcbiAgaGFuZGxlRXNjYXBlS2V5KGV2dCwgcG9wdXBJbWFnZSk7XG59KTtcblxuLy8gRm9ybSBWYWxpZGF0aW9uc1xuXG5jb25zdCBjb25maWcgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnRuXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiLnBvcHVwX19idG5fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIi5wb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBpbnB1dEVycm9yTWVzc2FnZUNsYXNzOiBcIi5wb3B1cF9fZXJyb3ItdmlzaWJsZVwiLFxufTtcblxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IocG9wdXBQcm9maWxlLCBjb25maWcpO1xucHJvZmlsZUZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgY2FyZEZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IocG9wdXBDYXJkcywgY29uZmlnKTtcbmNhcmRGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJoYW5kbGVPcGVuUG9wdXBzIiwicG9wdXAiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUNsaWNrT3V0IiwiY2xhc3NMaXN0IiwiYWRkIiwiaGFuZGxlQ2xvc2VQb3B1cHMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwiaGFuZGxlRXNjYXBlS2V5IiwiZXZ0IiwidGFyZ2V0IiwiY2xvc2VzdCIsInRlbXBsYXRlIiwiZG9jdW1lbnQiLCJDYXJkIiwibmFtZSIsImxpbmsiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9jYXJkIiwiZ2V0VGVtcGxhdGUiLCJ2YWx1ZSIsImNsb25lTm9kZSIsImNvbnRlbnQiLCJfY2FyZEltYWdlIiwiX2NhcmRUaXRsZSIsIl9idG5EZWxldGUiLCJfYnRuTGlrZSIsInNyYyIsInRleHRDb250ZW50IiwidG9nZ2xlIiwiX3RoaXMiLCJfaGFuZGxlTGlrZSIsIl9oYW5kbGVSZW1vdmUiLCJwb3B1cEltYWdlIiwicG9wdXBQaG90byIsInBvcHVwdGl0bGUiLCJhbHQiLCJfc2V0UHJvcGVydGllcyIsIl9zZXRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsInNldHRpbmdzIiwiX3NldHRpbmdzIiwiX2Zvcm1FbGVtZW50IiwiaW5wdXRMaXN0Iiwic29tZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJidXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvck1lc3NhZ2VDbGFzcyIsImVycm9yQ2xhc3MiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImZvcm1TZWxlY3RvciIsInByZXZlbnREZWZhdWx0IiwicG9wdXBQcm9maWxlIiwicHJvZmlsZUJ1dHRvbiIsInBvcHVwQ2FyZHMiLCJvcGVuQ2FyZEZvcm0iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVSb2xlIiwiaW5wdXROYW1lIiwiaW5wdXRSb2xlIiwiaW5wdXRDYXJkVGl0bGUiLCJpbnB1dENhcmRJbWFnZSIsImZvcm1Qcm9maWxlIiwiZm9ybUNhcmRzIiwicHJvZmlsZUNsb3NlQnV0dG9uIiwiY2FyZEZvcm1DbG9zZUJ1dHRvbiIsImltYWdlQ2xvc2VCdXR0b24iLCJjYXJkQXJlYSIsIm5ld0NhcmQiLCJnZW5lcmF0ZUNhcmQiLCJwcmVwZW5kIiwiZWxlbWVudCIsImFwcGVuZCIsImNvbmZpZyIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9